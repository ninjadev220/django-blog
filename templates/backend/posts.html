<!DOCTYPE html>
{% extends 'backend/base.html'%}
{% block content %}
{% if post_page %}
<div class="col-md-10" >


		<div class="post" style="height:500px; overflow: scroll">
			<div class="" style="float:right; margin-bottom:10px">
				<a href="{% url 'backend:new_post'%}"class="btn btn-primary"> + New Post </a>
			</div>


				<table class="table">
					<thead>
						<tr>
							<th scope="col">#</th>
							<th scope="col">Post Title</th>
							<th scope="col">Author</th>
							<th scope="col">Date Modified</th>
							<th scope="col">Status</th>
							<th scope="col">Action</th>
						</tr>
					</thead>
					<tbody>
						{% if posts %}
							{% for post in posts %}
							<tr>
								<th scope="row">{{ forloop.counter }}</th>
								<td> <a href="/blog/posts/{{post.id}}"> {{ post.title}} </a></td>
								<td><a href="/blog/author/{{post.author}}">{{ post.author}}</a></td>
								<td>{{post.updated_date.year}}/{{post.updated_date.month}}/{{post.updated_date.day}}</td>
								<td>{{post.status}}</td>
								<td>
										<a href="/backend/edit_post/{{post.id}}" class="btn btn-success">edit</a>
										<a href="/backend/delete_post/{{post.id}}" class="btn btn-danger">delete</a>

								</td>
								<td></td>
							</tr>
							{% endfor %}
						{% endif %}
					</tbody>
				</table>



		</div>
</div>
{% elif new_post %}
<div class="col-md-6">


		<div class="post">
				<form action="{% url 'backend:create_post'%}" method="POST" enctype="multipart/form-data">
					{% csrf_token %}
				<div class="form-group">

						<label for="post-title">Post Title:</label>
						<input type="text" id="post-title" class="form-control" name="post_title" value="">

				</div>

				<div class="form-group">
						<label for="content">Post Content:</label>
						<textarea class="form-control" rows="6" id="content" name="post_content">

						</textarea>

				</div>

				<div class="form-group" style="float: right">
						<input type="submit" name="status" value="Save as Draft" id="draft" class="btn btn-default">
						<input  type="submit" name="status" id="pubish" class="btn btn-primary" value="Publish">
				</div>


		</div>



</div>

<div class="col-md-2">

		<div class="post-option">

				<h2 style="font-size: 20px">Post Options:</h2>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="category">Category</label>
			</div>
			<select name="category" class="custom-select" id="category">
				<option selected value="c">C</option>
				<option  value="java">Java</option>
				<option  value="php">PHP</option>
				<option  value="python">Python</option>
			</select>


		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="category">Tags</label>
			</div>
			<select name="tag"class="custom-select" id="category">
				<option selected value="c">C</option>
				<option value="java">algorithm</option>
				<option value="php">php</option>
				<option value="python">data structure</option>
				<option value="python">content programming</option>
			</select>
		</div>

		<div class="form-group">
				<label for="file" >Select a Featured Image</label>
				<input name="featured_img" type="file" accept="image/*" id="file" class="form-control" onchange="readURL(this);">
				<img id="featured_image" src="" alt="Featured Image">
		</div>

			</form>

		</div>

</div>
{% elif edit_post %}
<div class="col-md-6">


		<div class="post">

				<form action="{% url 'backend:update_post' %}" method="POST" enctype="multipart/form-data">
					{% csrf_token %}

					<div class="form-group">
							<input type="hidden" name="post_id" value="{{post.id}}" >
							<label for="post-title">Post Title:</label>
							<input type="text" name="post_title" id="post-title" class="form-control" value="{{post.title}}">

					</div>

					<div class="form-group">
							<label for="content">Post Content:</label>
							<textarea name="post_content" class="form-control" rows="6" id="content">
								{{post.content}}
							</textarea>

					</div>



				<div class="form-group" style="float: right">
					 {% if post.status == 'drafted' %}
					 <input type="submit" name="status" value="Save as Draft" id="draft" class="btn btn-default">
					 <input  type="submit" name="status" id="pubish" class="btn btn-primary" value="Publish">
					 {% else %}
						<button type="submit" id="update" class="btn btn-primary">Update</button>
					 {% endif %}
				</div>

		</div>



</div>

<div class="col-md-2">

		<div class="post-option">

				<h2 style="font-size: 20px">Post Options:</h2>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="category">Category</label>
			</div>
			<select name="category" class="custom-select" id="category">
				<option selected value="{{post.category}}">{{post.category}}</option>
				<option value="java">Java</option>
				<option value="php">PHP</option>
				<option value="python">Python</option>
			</select>


		</div>

		<div class="input-group mb-3">
			<div class="input-group-prepend">
				<label class="input-group-text" for="category">Tags</label>
			</div>
			<select name="tag" class="custom-select" id="category">
				<option selected value="{{post.tag}}">{{post.tag}}</option>
				<option value="java">algorithm</option>
				<option value="php">php</option>
				<option value="python">data structure</option>
				<option value="python">content programming</option>
			</select>
		</div>

		<div class="form-group">
				<label for="file" >Select a Featured Image</label>
				<input name="featured_img" value="{{post.featured_img}}" type="file" id="file" class="form-control" onchange="readURL(this);">
				<img id="featured_image" src="/media/{{post.featured_img}}" alt="{{post.title}}" width="200px" height="200px">
		</div>

		</div>

</div>
</form>
{% endif %}
{% endblock %}
